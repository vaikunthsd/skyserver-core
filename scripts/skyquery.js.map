{"version":3,"sources":["../../scripts/skyquery.js"],"names":["xAuth","currentCatalog","currentTable","datasetsUrl","selectedQueue","jobs_table_refresh_time","currentExpandedJobsTableRows","jobIDvsRowIDMapping","sampleQueries","crossMatchQuery","jobsTableRowOptions","editor","ace","edit","setTheme","getSession","setMode","setOptions","enableBasicAutocompletion","enableSnippets","commands","on","e","command","name","test","args","execCommand","init","readCookie","callServices","nameEQ","ca","document","cookie","split","i","length","c","charAt","substring","indexOf","temp","decodeURIComponent","replace","skyqueryUrl","tablesUrl","updateCatalogs","refreshJobsTableContinuously","callSubmit","$","index","attr","setValue","callJobs","whichqueue","jobsurl","numberOfJobs","val","trim","addWaitSpinner","skyQueryConnect","submitJob","window","location","obj","query","queryObj","queryJob","jsonString","JSON","stringify","updateDropDown","response","parseJSON","mydbs","empty","each","text","val1","text1","append","deleteTable","ID","tabb","DataTable","clear","destroy","loadCatalogs","removeWaitSpinner","Data","row","push","fn","dataTable","isDataTable","columnsTable","processing","getElementById","innerHTML","addClass","loadTables","info","summary","remarks","removeClass","loadColumns","dataType","id","updateCatalogTables","catalogName","updateTableColumns","tableName","columnsurl","updatetables","listTables","updateColumns","listColumns","downloadTable","dbContext","format","accept","url","authToken","method","caller","senddata","accept_value","ajax","data","headers","type","beforeSend","jqxhr","settings","requestURL","success","status","xhr","updateJobs","modal","saveResponseAsFile","error","XMLHttpRequest","textStatus","errorThrown","errorMessage","console","log","alert","filename","disposition","getResponseHeader","filenameRegex","matches","exec","blob","Blob","s","navigator","msSaveBlob","URL","webkitURL","downloadUrl","createObjectURL","a","createElement","download","href","body","appendChild","click","setTimeout","revokeObjectURL","rows","rowId","tablerow","val2","text2","cls","status_message","getLabelCls","dbtb","output","dnlink","undefined","html_link","dateCreated","getDateString","dateStarted","dateFinished","queue","word","jobId","buttons","table","add","draw","myTable","nRow","aData","iDisplayIndex","iDisplayIndexFull","expandPreselectedRows","expandQuery","child","isShown","hide","createChildRow","show","sqlQuery","htmlCode","getSqlQuery","queryIndex","deselect","select","value","reloadQuery","queryElement","scrollIntoView","showJobsTable","refreshJobsTable","updateJobDetails","testFunction","dateString","isForUSerDisplay","doAddTimeZone","date","Date","month","String","getMonth","day","getDate","hours","getHours","minutes","getMinutes","seconds","getSeconds","milliseconds","getMilliseconds","substr","utcOffset","getTimezoneOffset","utcOffsetHours","parseInt","utcOffsetMinutes","timeZone","getUTCFullYear","err","addEventListener"],"mappings":"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","sourcesContent":["﻿var xAuth = \"\";\r\nvar currentCatalog = \"\";\r\nvar currentTable = \"\";\r\nvar datasetsUrl = \"\";\r\nvar selectedQueue = \"all\";\r\nvar jobs_table_refresh_time = 10000;//in milliseconds\r\nvar currentExpandedJobsTableRows = {};\r\nvar jobIDvsRowIDMapping = {};\r\nvar sampleQueries = [\r\n    \"Select top 10 ra,dec from  SDSSDR7:PhotoObj\",\r\n    \"SELECT s.objid, s.ra, s.dec, g.objid, g.ra, g.dec, x.ra, x.dec \\n\" +\r\n    \"INTO twowayxmatch  \\n\" +\r\n    \"FROM XMATCH( \\n\" +\r\n    \"     MUST EXIST IN SDSSDR7:PhotoObjAll AS s  \\n\" +\r\n    \"          WITH(POINT(s.ra, s.dec), ERROR(0.1, 0.1, 0.1)),  \\n\" +\r\n    \"     MUST EXIST IN GALEX:PhotoObjAll AS g  \\n\" +\r\n    \"          WITH(POINT(g.ra, g.dec), ERROR(0.2, 0.2, 0.2)),  \\n\" +\r\n    \"     LIMIT BAYESFACTOR TO 1e3 \\n\" +\r\n    \") AS x \\n\" +\r\n    \"WHERE s.ra BETWEEN 0 AND 5 AND s.dec BETWEEN 0 AND 5  \\n\" +\r\n    \"AND g.ra BETWEEN 0 AND 5 AND g.dec BETWEEN 0 AND 5 \"\r\n];\r\n\r\nvar crossMatchQuery = [];\r\nvar jobsTableRowOptions = {};\r\n\r\n/* initialize query editor */\r\n\r\nvar editor = ace.edit(\"editor\");\r\neditor.setTheme(\"ace/theme/clouds\");\r\n//editor.setTheme(\"ace/theme/merbivore\");\r\neditor.getSession().setMode(\"ace/mode/sql\");\r\neditor.setOptions({\r\n    enableBasicAutocompletion: true,\r\n    enableSnippets: true\r\n});\r\neditor.commands.on(\"afterExec\", function (e) {\r\n    if (e.command.name == \"insertstring\" && /^[\\<.]$/.test(e.args)) {\r\n        editor.execCommand(\"startAutocomplete\")\r\n    }\r\n});\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction init() {\r\n\r\n    readCookie(\"Keystone\");\r\n    if (xAuth != \"\") {\r\n        callServices();\r\n    }\r\n\r\n}\r\n\r\n\r\nfunction readCookie(name) {\r\n    var nameEQ = name + \"=\";\r\n    var ca = document.cookie.split(';');\r\n    //console.log(ca);\r\n    for (var i = 0; i < ca.length; i++) {\r\n        var c = ca[i];\r\n        while (c.charAt(0) == ' ') c = c.substring(1, c.length);\r\n        if (c.indexOf(nameEQ) == 0) {\r\n            var temp = c.substring(nameEQ.length, c.length);\r\n            if (temp.indexOf(\"token\") > -1)\r\n                temp = decodeURIComponent(temp);\r\n            xAuth = temp.replace(\"token=\", \"\");\r\n            //console.log(xAuth);\r\n            return c.substring(nameEQ.length, c.length);\r\n        }\r\n    }\r\n    return null;\r\n}\r\n\r\n\r\nfunction callServices() {\r\n\r\n\r\n    datasetsUrl = skyqueryUrl + \"Api/V1/Schema.svc/datasets\";\r\n    var tablesUrl = \"\";\r\n\r\n    //update database dropdown\r\n    //skyQueryConnect(datasetsUrl, xAuth, \"GET\", \"datasets\");\r\n\r\n    updateCatalogs();\r\n\r\n    refreshJobsTableContinuously();\r\n    //callJobs('all');\r\n    callSubmit();\r\n\r\n    /// select sample queries\r\n    $(document).on('click', '#samples a', function () {\r\n        var index = $(this).attr(\"tabindex\");\r\n        editor.setValue(sampleQueries[index]);\r\n    });\r\n\r\n\r\n}\r\n\r\nfunction callJobs(whichqueue) {\r\n    //load Jobs \r\n    var jobsurl = skyqueryUrl + \"Api/V1/Jobs.svc/queues/\" + whichqueue + \"/jobs?TaskName=Skyserver.SkyQuery.submitJob\";\r\n    var numberOfJobs = $(\"#numberOfJobs\").val().trim();\r\n    if (numberOfJobs != \"\")\r\n        jobsurl += \"&Max=\" + numberOfJobs;\r\n\r\n    //console.log(jobsurl);\r\n    addWaitSpinner('#waitSpinnerJobsTable');\r\n    skyQueryConnect(jobsurl, xAuth, \"GET\", \"jobs\");\r\n}\r\n\r\nfunction callSubmit() {\r\n\r\n\r\n    //submitJob\r\n    $(document).on('click', \"#submit\", function () {\r\n        submitJob(\"long\");\r\n    });\r\n\r\n    //runquick query\r\n    $(document).on('click', \"#quick\", function () {\r\n        submitJob(\"quick\");\r\n    });\r\n\r\n    // to open more information about skyquery apis\r\n    $(document).on('click', \"#info\", function () {\r\n        window.location = skyqueryUrl + \"Apps/Api/Default.aspx?token=\" + xAuth;\r\n    });\r\n\r\n    // to open more information about skyquery apis\r\n    $(document).on('click', \"#refresh\", function () {\r\n        //console.log(\"Test\");\r\n        callJobs(selectedQueue);\r\n    });\r\n\r\n    // button for manually refreshing jobs table\r\n    $(document).on('click', \"#refreshJobsTableButton\", function () {\r\n        //console.log(\"Test\");\r\n        callJobs(selectedQueue);\r\n    });\r\n\r\n\r\n\r\n\r\n}\r\n\r\n\r\nfunction submitJob(whichqueue) {\r\n\r\n    var jobsurl = skyqueryUrl + \"Api/V1/Jobs.svc/queues/\" + whichqueue + \"/jobs?TaskName=Skyserver.SkyQuery.submitJob\";\r\n    var obj = {};\r\n    obj.query = $(\"#query\").val();\r\n\r\n    var queryObj = {};\r\n    queryObj.queryJob = obj;\r\n\r\n    var jsonString = JSON.stringify(queryObj);\r\n\r\n    if (whichqueue == \"long\") {\r\n        addWaitSpinner('#submittingLongQuerySpinner');\r\n    }\r\n    if (whichqueue == \"quick\") {\r\n        addWaitSpinner('#submittingQuickQuerySpinner');\r\n    }\r\n\r\n\r\n    skyQueryConnect(jobsurl, xAuth, \"POST\", whichqueue, jsonString);\r\n}\r\n// Update datasets \r\nfunction updateDropDown(response) {\r\n\r\n    var temp = $.parseJSON(JSON.stringify(response));\r\n\r\n    var mydbs = $('#ListDataSets');\r\n    $('#ListDataSets').empty();\r\n    $.each(temp, function (val, text) {\r\n        $.each(text, function (val1, text1) {\r\n            mydbs.append($(\"<a href=\\\"javascript:void(0)\\\" class=\\\"list-group-item\\\">\" + text1.name + \"</a>\").val(val1));\r\n        });\r\n    });\r\n}\r\n\r\n\r\n//////// start ///////////////////////////////////////////////\r\n\r\n\r\nfunction deleteTable(ID) {\r\n    var tabb = $(ID).DataTable();\r\n    tabb.clear();\r\n    tabb.destroy();\r\n    //$(ID).remove();\r\n    //tabb.destroy();\r\n    $(ID).empty();\r\n    //$('#SchemaTable').dataTable().fnDestroy();\r\n    //$(ID).empty()\r\n}\r\n\r\nfunction loadCatalogs(response) {\r\n    removeWaitSpinner('#waitSpinner');\r\n    var temp = $.parseJSON(JSON.stringify(response));\r\n\r\n    //var mydbs = $('#DataCatalogs');\r\n    //$('#DataCatalogs').empty();\r\n\r\n    Data = [];\r\n    $.each(temp, function (val, text) {\r\n        $.each(text, function (val1, text1) {\r\n            name = \"<a href=\\\"javascript:void(0)\\\" onclick=\\\"updateCatalogTables('\" + text1.name + \"')\\\" >\" + text1.name + \"</a>\";\r\n            row = { 0: name };\r\n            Data.push(row);\r\n        });\r\n    });\r\n\r\n    //mydbs.append('<table id=\"SchemaTable\" class=\"table table-bordered schema-browser-table\"></table>');\r\n    if ($.fn.dataTable.isDataTable('#SchemaTable')) {//trying to refresh the table\r\n        deleteTable(\"#SchemaTable\");\r\n    }\r\n\r\n    var columnsTable = $(\"#SchemaTable\").DataTable(\r\n        {\r\n            \"dom\": '<\"top\"i>rt<\"bottom\"flp><\"clear\">',\r\n            \"data\": Data,\r\n            \"searching\": true,\r\n            \"info\": false,\r\n            //\"lengthChange\": true,\r\n            //\"order\": [[0, 'desc']],\r\n            \"scrollY\": \"300px\",\r\n            \"scrollCollapse\": true,\r\n            \"paging\": false,\r\n\r\n            \"scrollX\": true,\r\n            \"bDestroy\": true,\r\n            \"columnDefs\": [\r\n                { \"title\": \"Catalog Name\", \"visible\": true, \"targets\": 0 }\r\n            ],\r\n            \"processing\": true,\r\n            \"bProcessing\": true,\r\n            \"language\": {\r\n                processing: '<i class=\"fa fa-spinner fa-spin fa-3x fa-fw\"></i><span class=\"sr-only\">Loading...</span>'\r\n            }\r\n        });\r\n\r\n    document.getElementById(\"schemaTitle\").innerHTML = \"\"; //\"Catalogs list\"\r\n    $(\"#catalogInPath\").addClass(\"hidden\");\r\n    $(\"#tableInPath\").addClass(\"hidden\");\r\n}\r\n\r\n\r\nfunction loadTables(response) {\r\n    removeWaitSpinner('#waitSpinner');\r\n    var temp = $.parseJSON(JSON.stringify(response));\r\n\r\n    var mydbs = $('#DataCatalogs');\r\n    //$('#DataCatalogs').empty();\r\n\r\n\r\n    Data = [];\r\n    $.each(temp, function (val, text) {\r\n        $.each(text, function (val1, text1) {\r\n            //mydbs.append($(\"<a href=\\\"#\\\" class=\\\"list-group-item\\\" onclick=\\\"updateTableColumns('\" + text1.name + \"')\\\" >\" + text1.name + \"</a>\").val(val1));\r\n            name = \"<a href=\\\"javascript:void(0)\\\" onclick=\\\"updateTableColumns('\" + text1.name + \"')\\\" >\" + text1.name + \"</a>\";\r\n\r\n            info = \"\";\r\n            if (text1.summary != \"\")\r\n                info = info + text1.summary;\r\n            if (text1.remarks != \"\") {\r\n                if (info != \"\") {\r\n                    info = info + \"<br>\" + text1.remarks;\r\n                } else {\r\n                    info = info + text1.remarks;\r\n                }\r\n            }\r\n\r\n            row = { 0: name, 1: info };\r\n            Data.push(row);\r\n        });\r\n    });\r\n\r\n    //mydbs.append('<table id=\"SchemaTable\" class=\"table table-bordered schema-browser-table\"></table>');\r\n    if ($.fn.dataTable.isDataTable('#SchemaTable')) {//trying to refresh the table\r\n        deleteTable(\"#SchemaTable\");\r\n    }\r\n    var columnsTable = $(\"#SchemaTable\").DataTable(\r\n        {\r\n            \"dom\": '<\"top\"i>rt<\"bottom\"flp><\"clear\">',\r\n            \"data\": Data,\r\n            \"searching\": true,\r\n            \"info\": false,\r\n            //\"lengthChange\": true,\r\n            //\"order\": [[0, 'desc']],\r\n            \"scrollY\": \"300px\",\r\n            \"scrollX\": true,\r\n            \"scrollCollapse\": true,\r\n            \"paging\": false,\r\n            \"bDestroy\": true,\r\n            \"columnDefs\": [\r\n                { \"title\": \"Table Name\", \"visible\": true, \"targets\": 0 },\r\n                { \"title\": \"Info\", \"visible\": true, \"targets\": 1 },\r\n            ],\r\n            \"processing\": true,\r\n            \"bProcessing\": true,\r\n            \"language\": {\r\n                processing: '<i class=\"fa fa-spinner fa-spin fa-3x fa-fw\"></i><span class=\"sr-only\">Loading...</span>'\r\n            }\r\n        });\r\n\r\n\r\n    document.getElementById(\"catalogInPath\").innerHTML = document.getElementById(\"catalogInPath\").innerHTML = '<a href=\"javascript:void(0)\" onclick =\"updateCatalogTables(\\'' + currentCatalog + '\\')\">' + currentCatalog + \"</a>\";\r\n    document.getElementById(\"schemaTitle\").innerHTML = \"\"; //\"Catalog Tables\"\r\n    $(\"#catalogInPath\").removeClass(\"hidden\");\r\n    $(\"#tableInPath\").addClass(\"hidden\");\r\n}\r\n\r\nfunction loadColumns(response) {\r\n    removeWaitSpinner('#waitSpinner');\r\n    var temp = $.parseJSON(JSON.stringify(response));\r\n\r\n    var mydbs = $('#DataCatalogs');\r\n    //$('#DataCatalogs').empty();\r\n\r\n    /*8\r\n        tableHeader = \"<tr><th>Column Name</th><th>Data Type</th><th>Summary</th></tr>\"\r\n        table = \"<table width='100%' class='schema-browser-table' style='margin: 0px;overflow-x: scroll;'>\" + tableHeader \r\n        $.each(temp, function (val, text) {\r\n            $.each(text, function (val1, text1) {\r\n                table = table + \"<tr><td>\" + text1.name + \"</td><td>\" + text1.dataType + \"</td><td>\" + text1.summary + \"</td></td></tr>\"\r\n                //item = \"<div class=\\\"list-group-item\\\" >\" + table + \"</div>\"\r\n                //mydbs.append(item);\r\n            });\r\n        });\r\n        table = table + \"</table>\"\r\n        item = \"<div class=\\\"list-group-item\\\" >\" + table + \"</div>\"\r\n        mydbs.append(item);\r\n    */\r\n\r\n    Data = [];\r\n    $.each(temp, function (val, text) {\r\n        $.each(text, function (val1, text1) {\r\n\r\n            dataType = \"\";\r\n            if (text1.dataType != null) {\r\n                dataType = text1.dataType;\r\n            }\r\n\r\n            info = \"\";\r\n            if (text1.summary != \"\" & text1.summary != null)\r\n                info = info + text1.summary;\r\n            if (text1.remarks != \"\" & text1.remarks != null) {\r\n                if (info != \"\") {\r\n                    info = info + \"<br>\" + text1.remarks;\r\n                } else {\r\n                    info = info + text1.remarks;\r\n                }\r\n            }\r\n\r\n\r\n            row = { 0: text1.name, 1: text1.dataType, 2: info };\r\n            Data.push(row);\r\n        });\r\n    });\r\n\r\n\r\n    //mydbs.append('<table id=\"SchemaTable\" class=\"table table-bordered schema-browser-table\" style=\"width:100%;\"></table>');\r\n    if ($.fn.dataTable.isDataTable('#SchemaTable')) {//trying to refresh the table\r\n        deleteTable(\"#SchemaTable\");\r\n    }\r\n    var columnsTable = $(\"#SchemaTable\").DataTable(\r\n        {\r\n            \"dom\": '<\"top\"i>rt<\"bottom\"flp><\"clear\">',\r\n            \"data\": Data,\r\n            \"searching\": true,\r\n            \"info\": false,\r\n            //\"lengthChange\": true,\r\n            //\"order\": [[0, 'desc']],\r\n            \"scrollY\": \"300px\",\r\n            \"scrollCollapse\": true,\r\n            \"paging\": false,\r\n            \"scrollX\": true,\r\n            \"bDestroy\": true,\r\n            \"columnDefs\": [\r\n                { \"title\": \"Column Name\", \"visible\": true, \"targets\": 0 },\r\n                { \"title\": \"Data Type\", \"visible\": true, \"targets\": 1 },\r\n                { \"title\": \"Info\", \"visible\": true, \"targets\": 2 },\r\n            ],\r\n            \"processing\": true,\r\n            \"bProcessing\": true,\r\n            \"language\": {\r\n                processing: '<i class=\"fa fa-spinner fa-spin fa-3x fa-fw\"></i><span class=\"sr-only\">Loading...</span>'\r\n            }\r\n\r\n        });\r\n\r\n\r\n    document.getElementById(\"tableInPath\").innerHTML = currentTable;\r\n    document.getElementById(\"schemaTitle\").innerHTML = \"\"; //\"Table Columns\"\r\n    $(\"#catalogInPath\").removeClass(\"hidden\");\r\n    $(\"#tableInPath\").removeClass(\"hidden\");\r\n}\r\n\r\nfunction addWaitSpinner(id) {\r\n    $(id).removeClass(\"hidden\");\r\n}\r\nfunction removeWaitSpinner(id) {\r\n    $(id).addClass(\"hidden\");\r\n}\r\n\r\n\r\nfunction updateCatalogs() {\r\n    addWaitSpinner('#waitSpinner');\r\n    skyQueryConnect(datasetsUrl, xAuth, \"GET\", \"catalogs\");\r\n}\r\n\r\n\r\nfunction updateCatalogTables(catalogName) {\r\n    currentCatalog = catalogName;\r\n    datasetsUrl = skyqueryUrl + \"Api/V1/Schema.svc/datasets?TaskName=Skyserver.SkyQuery.listAllDatasets\";\r\n    tablesUrl = skyqueryUrl + \"Api/V1/Schema.svc/datasets/\" + currentCatalog + \"/tables?TaskName=Skyserver.SkyQuery.listDatasetTables\";\r\n    addWaitSpinner('#waitSpinner');\r\n    //$('#DataTables').empty();\r\n    //$('#DataColumns').empty();\r\n    skyQueryConnect(tablesUrl, xAuth, \"GET\", \"tables\");\r\n}\r\n\r\n\r\nfunction updateTableColumns(tableName) {\r\n    currentTable = tableName;\r\n    datasetsUrl = skyqueryUrl + \"Api/V1/Schema.svc/datasets?TaskName=Skyserver.SkyQuery.listAllDatasets\";\r\n    columnsurl = skyqueryUrl + \"Api/V1/Schema.svc/datasets/\" + currentCatalog + \"/tables/\" + currentTable + \"/columns?TaskName=Skyserver.SkyQuery.listTableColumns\";\r\n    addWaitSpinner('#waitSpinner');\r\n    skyQueryConnect(columnsurl, xAuth, \"GET\", \"columns\");\r\n}\r\n\r\n\r\n/////////fin ////////////////////////////////////////////////////////////////////////\r\n\r\n// update tables according to database selection\r\nfunction updatetables(response) {\r\n    //alert(JSON.stringify(response));\r\n    var temp = $.parseJSON(JSON.stringify(response));\r\n\r\n    var listTables = $('#DataCatalogs');\r\n    $('#DataCatalogs').empty();\r\n    $.each(temp, function (val, text) {\r\n        $.each(text, function (val1, text1) {\r\n            listTables.append($(\"<a href=\\\"#\\\" class=\\\"list-group-item\\\">\" + text1.name + \"</a>\").val(val1));\r\n        });\r\n    });\r\n}\r\n\r\nfunction updateColumns(response) {\r\n    //alert(JSON.stringify(response));\r\n    var temp = $.parseJSON(JSON.stringify(response));\r\n    var listColumns = $('#DataCatalogs');\r\n    $('#DataCatalogs').empty();\r\n    $.each(temp, function (val, text) {\r\n        $.each(text, function (val1, text1) {\r\n            listColumns.append($(\"<a href=\\\"#\\\" class=\\\"list-group-item\\\">\" + text1.name + \"</a>\").val(val1));\r\n        });\r\n    });\r\n}\r\n\r\nfunction downloadTable(dbContext, tableName, format) {\r\n\r\n    query = \"select * from \" + tableName;\r\n    if (format == \"json\") {\r\n        accept = \"application/json\";\r\n    } else if (format == \"csv\") {\r\n        accept = \"text/csv\";\r\n    } else if (format == \"txt\") {\r\n        accept = \"text/plain\";\r\n    } else if (format == \"fits\") {\r\n        accept = \"application/fits\";\r\n    } else if (format == \"xml\") {\r\n        accept = \"application/xml\";\r\n    } else {\r\n        accept = \"text/csv\";\r\n    }\r\n\r\n    url = skyqueryUrl + \"Api/V1/Data.svc/\" + dbContext + \"/\" + tableName + \"?TaskName=Skyserver.SkyQuery.getTable\";\r\n    skyQueryConnect(url, xAuth, \"GET\", \"downloadTable\", null, accept);\r\n}\r\n\r\n\r\n\r\nfunction skyQueryConnect(url, authToken, method, caller, senddata, accept) {\r\n\r\n    if (accept == null) {\r\n        accept_value = \"application/json\";\r\n    } else {\r\n        accept_value = accept;\r\n    }\r\n\r\n    $.ajax({\r\n        url: url,\r\n        //        dataType: \"json\",\r\n        data: senddata,\r\n        headers: { \"Content-Type\": \"application/json\", \"Accept\": accept_value, \"X-Auth-Token\": authToken },\r\n        accept: accept_value,\r\n        type: method,\r\n        beforeSend: function (jqxhr, settings) { jqxhr.requestURL = \"http://some/url\"; },\r\n        success: function (response, status, xhr) {\r\n\r\n            if (caller == \"catalogs\") {\r\n                loadCatalogs(response);\r\n            }\r\n            if (caller == \"tables\") {\r\n                loadTables(response);\r\n            }\r\n            if (caller == \"columns\") {\r\n                loadColumns(response);\r\n            }\r\n            if (caller == \"datasets\") {\r\n                updateDropDown(response);\r\n            }\r\n            else if (caller == \"tablelist\") {\r\n                updatetables(response);\r\n            }\r\n            else if (caller == \"columnlist\") {\r\n                updateColumns(response);\r\n            }\r\n            else if (caller == \"jobs\") {\r\n                updateJobs(response);\r\n            }\r\n            else if (caller == \"long\" || caller == \"quick\") {\r\n\r\n                //$('#waitWhileSavingChangesModal').modal('hide');\r\n                $('#queryWasSubmittedModal').modal('show');\r\n\r\n                selectedQueue = caller;\r\n\r\n                if (caller == \"quick\") {\r\n                    removeWaitSpinner('#submittingQuickQuerySpinner');\r\n                }\r\n                else {\r\n                    removeWaitSpinner('#submittingLongQuerySpinner');\r\n                }\r\n                callJobs(caller);\r\n            }\r\n            else if (caller == \"downloadTable\") {\r\n                saveResponseAsFile(response, status, xhr, url);\r\n            } else {\r\n       \r\n            }\r\n        },\r\n        error: function (XMLHttpRequest, textStatus, errorThrown) {\r\n            //alert(\"Error when connecting with SkyQuery:\\n\\n\" + errorThrown);\r\n            removeWaitSpinner('#waitSpinner');\r\n            removeWaitSpinner('#waitSpinnerJobsTable');\r\n            removeWaitSpinner('#submittingQuickQuerySpinner');\r\n            removeWaitSpinner('#submittingLongQuerySpinner');\r\n            errorMessage = \"Error when connecting with SkyQuery:\\n\" + errorThrown + \"\\n\" + textStatus;\r\n            console.log(errorMessage);\r\n            alert(errorMessage);\r\n        }\r\n    });\r\n}\r\n\r\nfunction saveResponseAsFile(response, status, xhr, url) {\r\n\r\n\r\n    var filename = \"\";\r\n    var disposition = xhr.getResponseHeader('Content-Disposition');\r\n    if (disposition && disposition.indexOf('attachment') !== -1) {\r\n        var filenameRegex = /filename[^;=\\n]*=((['\"]).*?\\2|[^;\\n]*)/;\r\n        var matches = filenameRegex.exec(disposition);\r\n        if (matches != null && matches[1]) filename = matches[1].replace(/['\"]/g, '');\r\n    }\r\n\r\n    var type = xhr.getResponseHeader('Content-Type');\r\n    var blob = new Blob([response], { type: type });\r\n\r\n    if (filename == \"\") {\r\n\r\n        s = url.split(\"/\");\r\n        filename = s[s.length - 1];\r\n\r\n        if (type == \"text/csv\")\r\n            filename = filename + \".csv\";\r\n        else if (type == \"text/plain\")\r\n            filename = filename + \".txt\";\r\n    }\r\n\r\n\r\n\r\n    if (typeof window.navigator.msSaveBlob !== 'undefined') {\r\n        // IE workaround for \"HTML7007: One or more blob URLs were revoked by closing the blob for which they were created. These URLs will no longer resolve as the data backing the URL has been freed.\"\r\n        window.navigator.msSaveBlob(blob, filename);\r\n    } else {\r\n        var URL = window.URL || window.webkitURL;\r\n        var downloadUrl = URL.createObjectURL(blob);\r\n\r\n        if (filename) {\r\n            // use HTML5 a[download] attribute to specify filename\r\n            var a = document.createElement(\"a\");\r\n            // safari doesn't support this yet\r\n            if (typeof a.download === 'undefined') {\r\n                window.location = downloadUrl;\r\n            } else {\r\n                a.href = downloadUrl;\r\n                a.download = filename;\r\n                document.body.appendChild(a);\r\n                a.click();\r\n            }\r\n        } else {\r\n            window.location = downloadUrl;\r\n        }\r\n\r\n        setTimeout(function () { URL.revokeObjectURL(downloadUrl); }, 100); // cleanup\r\n    }\r\n\r\n}\r\n\r\n/// This is to populate jobslist\r\nfunction updateJobs(response) {\r\n    removeWaitSpinner('#waitSpinnerJobsTable');\r\n    //alert(JSON.stringify(response));\r\n    var temp = $.parseJSON(JSON.stringify(response));\r\n    //var mySelect = $('#bjobsList');\r\n    //$('#bjobsList').empty();\r\n\r\n    var rows = [];\r\n    crossMatchQuery = [];\r\n    jobIDvsRowIDMapping = {};\r\n    var rowId = 0;\r\n    $.each(temp, function (val, text) {\r\n        $.each(text, function (val1, text1) {\r\n            tablerow = \"<tr>\";\r\n            $.each(text1, function (val2, text2) {\r\n                var cls = \"label label-default\";\r\n\r\n                status_message = \"\";\r\n                if (text2.error != null) {\r\n                    status_message = text2.error;\r\n                }\r\n\r\n                var status = \"<td><span class=\\\"\" + getLabelCls(text2.status) + \"\\\">\" + text2.status + \"</span><br>\" + status_message + \"</td>\";\r\n                var dbtb = \"\";\r\n                if (typeof text2.output != 'undefined')\r\n                    dbtb = text2.output.split(\":\");\r\n\r\n                var dnlink = \"\";\r\n                if (text2.output != undefined) {\r\n                    var html_link = skyqueryUrl + \"Api/V1/Data.svc/\" + dbtb[0] + \"/\" + dbtb[1] + \"?token=\" + xAuth + \"&TaskName=Skyserver.SkyQuery.download\";\r\n                    dnlink = \"<a href=\" + html_link + \"  download><span> \" + \"html\" + \"</span></a>\" +\r\n                        \"<a href=\\\"javascript:void(0)\\\" onclick =\\\"downloadTable('\" + dbtb[0] + \"','\" + dbtb[1] + \"','csv')\\\"><span> \" + \"csv\" + \"</span></a>\" +\r\n                        \"<a href=\\\"javascript:void(0)\\\" onclick =\\\"downloadTable('\" + dbtb[0] + \"','\" + dbtb[1] + \"','json')\\\"><span> \" + \"txt\" + \"</span></a>\";\r\n                    //\"<a href=\\\"javascript:void(0)\\\" onclick =\\\"downloadTable('\" + dbtb[0] + \"','\" + dbtb[1] + \"','fits')\\\"><span> \" + \"FITS\" + \"</span></a>\" +\r\n                    //\"<a href=\\\"javascript:void(0)\\\" onclick =\\\"downloadTable('\" + dbtb[0] + \"','\" + dbtb[1] + \"','xml')\\\"><span> \" + \"XML\" + \"</span></a>\";\r\n                }\r\n                dateCreated = getDateString(text2.dateCreated == undefined ? \"\" : text2.dateCreated, true, false);\r\n                dateStarted = getDateString(text2.dateStarted == undefined ? \"\" : text2.dateStarted, true, false);\r\n                dateFinished = getDateString(text2.dateFinished == undefined ? \"\" : text2.dateFinished, true, false);\r\n                query = text2.query == undefined ? \"\" : text2.query;\r\n                queue = text2.queue == undefined ? \"\" : text2.queue;\r\n                word = query;\r\n                jobId = text2.name;\r\n                buttons = '<button type=\"button\" id=\"expandQueryButton_' + jobId + '\" class=\"btn btn-sm btn-default\" onclick=\"expandQuery(\\'' + jobId + '\\')\" >Expand Query</button><button type=\"button\" id=\"reloadQueryButton\" class=\"btn btn-sm btn-default\" onclick=\"reloadQuery(\\'' + jobId + '\\')\" >Reload Query</button>';\r\n\r\n\r\n                rows.push({ 0: dateCreated, 1: dateStarted, 2: dateFinished, 3: queue, 4: status, 5: dnlink, 6: query, 7: buttons, 8: jobId, 9: rowId });\r\n                jobIDvsRowIDMapping[jobId] = rowId;\r\n\r\n\r\n\r\n                rowId = rowId + 1;\r\n                crossMatchQuery.push(query);\r\n\r\n            });\r\n            //mySelect.append(tablerow);\r\n\r\n\r\n        });\r\n    });\r\n\r\n\r\n    if ($.fn.dataTable.isDataTable('#jobsTable')) {//trying to refresh the table\r\n        var table = $(\"#jobsTable\").DataTable();\r\n        table.clear();\r\n        table.rows.add(rows).draw(false);\r\n    } else {\r\n\r\n        var myTable = $(\"#jobsTable\").DataTable(\r\n            {\r\n                \"data\": rows,\r\n                \"responsive\": true,\r\n                \"bFilter\": true,// text search\r\n                \"lengthMenu\": [[10, 25, 50, -1], [10, 25, 50, \"All \"]],\r\n                \"stateSave\": false,\r\n                \"oLanguage\": {\r\n                    \"sLengthMenu\": \"_MENU_ rows per page\"\r\n                },\r\n                \"columnDefs\": [\r\n                    { \"title\": \"Created\", \"visible\": true, \"targets\": 0 },\r\n                    { \"title\": \"Started\", \"visible\": true, \"targets\": 1 },\r\n                    { \"title\": \"Finished\", \"visible\": true, \"targets\": 2 },\r\n                    { \"title\": \"Queue\", \"visible\": true, \"targets\": 3 },\r\n                    { \"title\": \"Status\", \"visible\": true, \"targets\": 4 },\r\n                    { \"title\": \"Download\", \"visible\": true, \"targets\": 5 },\r\n                    { \"title\": \"Query\", \"visible\": true, \"targets\": 6 },\r\n                    { \"title\": \"\", \"visible\": true, \"targets\": 7, \"className\": 'details-control', \"orderable\": false }\r\n                ],\r\n                \"paging\": true,\r\n                \"order\": [[0, 'desc']],//\"order\": [[1,'asc']],//sorts the columns \"order\": []\r\n                \"rowCallback\": function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {\r\n                    // Row click\r\n                    $(nRow).on('click', function () {\r\n                        //getSqlQuery(iDisplayIndexFull);\r\n                    });\r\n                }\r\n\r\n            });\r\n    }\r\n    expandPreselectedRows();\r\n\r\n\r\n}\r\n\r\nfunction expandPreselectedRows() {\r\n\r\n    var table = $(\"#jobsTable\").DataTable();\r\n\r\n    for (var jobId in currentExpandedJobsTableRows) {\r\n        expandQuery(jobId, table);\r\n    }\r\n}\r\n\r\n\r\nfunction expandQuery(jobId, table) {\r\n\r\n    rowId = jobIDvsRowIDMapping[jobId];\r\n\r\n    if (table == null) {\r\n        table = $(\"#jobsTable\").DataTable();\r\n    }\r\n\r\n    var row = table.row(rowId);\r\n\r\n    data = row.data();\r\n\r\n    if (row.child.isShown()) {\r\n        row.child.hide();\r\n        document.getElementById(\"expandQueryButton_\" + jobId).innerHTML = \"Expand Query\";\r\n        delete currentExpandedJobsTableRows[jobId];\r\n    }\r\n    else {\r\n        row.child(createChildRow(data, jobId)).show();\r\n        document.getElementById(\"expandQueryButton_\" + jobId).innerHTML = \"Hide Query\";\r\n        currentExpandedJobsTableRows[jobId] = true;\r\n    }\r\n}\r\n\r\nfunction createChildRow(data, jobId) {\r\n    sqlQuery = data[6];\r\n    htmlCode = '<h4 style=\"text-center\">SQL Query:</h4><div class=\"\">' +\r\n        '<a href=\\\"javascript:void(0)\\\" onclick=\"reloadQuery(\\'' + jobId + '\\')\" >Reload Query</a>' +\r\n        '<pre><code class=\"SQL\"><div id=\"query2\">' +\r\n        sqlQuery +\r\n    '</div></code></pre>' +\r\n        '</div>';\r\n    return htmlCode;\r\n}\r\n\r\n\r\nfunction getSqlQuery(queryIndex) {\r\n\r\n    var table = $(\"#jobsTable\").DataTable();\r\n    table.rows('').deselect();\r\n    table.row(queryIndex).select();\r\n    if (crossMatchQuery[queryIndex] != undefined)\r\n        document.getElementById(\"crossMatchQuery\").value = crossMatchQuery[queryIndex];\r\n    else\r\n        document.getElementById(\"crossMatchQuery\").value = \"\";\r\n}\r\n\r\nfunction reloadQuery(jobId) {\r\n    rowId = jobIDvsRowIDMapping[jobId];\r\n    var table = $(\"#jobsTable\").DataTable();\r\n    var row = table.row(rowId);\r\n    data = row.data();\r\n    var queryElement = document.getElementById(\"editor\");\r\n    editor.setValue(data[6]);\r\n    queryElement.scrollIntoView();\r\n}\r\n\r\nfunction showJobsTable() {\r\n    var queryElement = document.getElementById(\"jobsTable\");\r\n    queryElement.scrollIntoView();\r\n}\r\n\r\n\r\n\r\nfunction refreshJobsTable() {\r\n    callJobs(selectedQueue);\r\n}\r\n\r\nfunction refreshJobsTableContinuously() {\r\n    if (jobs_table_refresh_time != null && jobs_table_refresh_time > 0) {\r\n        refreshJobsTable();\r\n        setTimeout(refreshJobsTableContinuously, jobs_table_refresh_time);\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nfunction getLabelCls(status) {\r\n    var cls = \"\";\r\n    switch (status) {\r\n        case \"completed\": cls = \"label label-success\"; break;\r\n        case \"failed\": cls = \"label label-danger\"; break;\r\n        case \"canceled\": cls = \"label label-warning\"; break;\r\n        case \"waiting\": cls = \"label label-primary\"; break;\r\n        case \"executing\": cls = \"label label-default\"; break;\r\n        case \"timedout\": cls = \"label label-danger\"; break;\r\n        default:\r\n            cls = \"\"; break;\r\n    }\r\n    return cls;\r\n}\r\n\r\nfunction updateJobDetails(id) {\r\n    //alert(id);\r\n}\r\n\r\n\r\nfunction testFunction() {\r\n\r\n    $.ajax({\r\n        url: skyqueryUrl + \"Api/V1/Schema.svc/datasets\",\r\n\r\n        dataType: \"json\",\r\n\r\n        headers: { \"Content-Type\": \"application/json\", \"Accept\": \"application/json\", \"X-Auth-Token\": \"61d7e192cc2e45c3aaa10541607b2e3c\" },\r\n        type: 'GET',\r\n\r\n        success: function (response) {\r\n            alert(JSON.stringify(response));\r\n            //console.log(response);\r\n        },\r\n        error: function (data, errorThrown) {\r\n            alert(errorThrown);\r\n        }\r\n    });\r\n}\r\n\r\nfunction getDateString(dateString, isForUSerDisplay, doAddTimeZone) {\r\n\r\n    try {\r\n        if (dateString != \"\" & dateString != null) {\r\n            //dateString = dateString.replace(\"T\", \" \");\r\n            date = new Date(dateString);\r\n\r\n            var month = String(date.getMonth() + 1);\r\n            if (month.length == 1)\r\n                month = \"0\" + month;\r\n\r\n            var day = String(date.getDate());\r\n            if (day.length == 1)\r\n                day = \"0\" + day;\r\n\r\n            var hours = String(date.getHours());\r\n            if (hours.length == 1)\r\n                hours = \"0\" + hours;\r\n\r\n            var minutes = String(date.getMinutes());\r\n            if (minutes.length == 1)\r\n                minutes = \"0\" + minutes;\r\n\r\n            var seconds = String(date.getSeconds());\r\n            if (seconds.length == 1)\r\n                seconds = \"0\" + seconds;\r\n\r\n            var milliseconds = String(date.getMilliseconds());\r\n            milliseconds = (\"000\" + milliseconds).substr(-3, 3);\r\n\r\n            var utcOffset = date.getTimezoneOffset();\r\n\r\n            var utcOffsetHours = parseInt(utcOffset / 60.0);\r\n            var utcOffsetMinutes = utcOffset - utcOffsetHours * 60;\r\n            utcOffsetHours = String(utcOffsetHours);\r\n            if (utcOffsetHours.length == 1)\r\n                utcOffsetHours = \"0\" + utcOffsetHours;\r\n            utcOffsetMinutes = String(utcOffsetMinutes);\r\n            if (utcOffsetMinutes.length == 1)\r\n                utcOffsetMinutes = \"0\" + utcOffsetMinutes;\r\n\r\n            var timeZone = \"\";\r\n\r\n            if (utcOffset > 0)\r\n                timeZone += \"+\" + utcOffsetHours + \"\" + utcOffsetMinutes;\r\n            else\r\n                timeZone += \"-\" + utcOffsetHours + \"\" + utcOffsetMinutes;\r\n\r\n            //var s = date.getUTCFullYear() + \"-\" + month + \"-\" + day + \" \" + hours + \":\" + minutes + \":\" + seconds + \".\" + milliseconds + \"\" + timeZone;\r\n\r\n            var s = \"\";\r\n\r\n            if (isForUSerDisplay)\r\n                s = date.getUTCFullYear() + \"-\" + month + \"-\" + day + \" \" + hours + \":\" + minutes + \":\" + seconds;\r\n            else\r\n                s = date.getUTCFullYear() + \"-\" + month + \"-\" + day + \"T\" + hours + \":\" + minutes + \":\" + seconds;\r\n\r\n            if (doAddTimeZone)\r\n                s = s + \" \" + timeZone;\r\n\r\n            if (s.indexOf(\"NaN\") >= 0)\r\n                return \"\";\r\n            else\r\n                return s;\r\n\r\n        } else {\r\n            return \"\";\r\n        }\r\n\r\n    } catch (err) {\r\n        return \"\";\r\n    }\r\n\r\n}\r\n\r\ndocument.addEventListener(\"load\", init());\r\n\r\n\r\n"],"file":"skyquery.js"}